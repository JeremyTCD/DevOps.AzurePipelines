parameters:
  endpoint: ""
  pat: ""

steps:
- powershell: |
    "Setting registry:`n"
    set-content .npmrc "registry=$env:ENDPOINT"
    "    Registry set to $env:ENDPOINT.`n"

    if($env:PAT){
      "Setting registry PAT..."
      add-content .npmrc "$($env:ENDPOINT -replace 'https:', ''):_authToken=$env:PAT
    always-auth=true"
    }
  displayName: "Set registry"
  env:
    ENDPOINT: ${{parameters.endpoint}}
    PAT: ${{parameters.pat}}